{{ partial "header.html" . }}
{{ partial "navbar.html" . }}

<article class="post">
  <h1>{{ .Title }}</h1>

  {{ if ne .Type "standalone" }}
  <em class="footnote">
    {{ $isoDate :=  .Date.Format "2006-01-02T15:04:05Z07:00" }}
    <time datetime="{{ $isoDate }}" class="timeago">{{ $isoDate }}</time>

    <span class="sep">&middot;</span>
    {{ .ReadingTime }} mins

    <span class="sep">&middot;</span>
    {{ .FuzzyWordCount | lang.NumFmt 0 }} words

    {{ if or .Params.tags .Params.categories .Params.series }}
    <span class="sep">&middot;</span>
    {{ end }}

    {{ $baseurl := .Site.BaseURL }}
    {{ range .Params.tags }}
    <a href="{{ $baseurl }}tags/{{ . | urlize }}">#{{ . }}</a>
    {{ end }}

    {{ range .Params.categories }}
    <a href="{{ $baseurl }}categories/{{ . | urlize }}">%{{ . }}</a>
    {{ end }}

    <span class="sep">&middot;</span>
    An article by Shrikant Sharat Kandula
  </em>

  {{ partial "pageline.html" . }}
  {{ end }}

  <div class="post-content">
    {{- $.Scratch.Set "content" .Content -}}
    {{- range .Site.Params.PostProcess -}}
    {{- $.Scratch.Get "content" | replaceRE .re .to | $.Scratch.Set "content" -}}
    {{- end -}}
    {{- $.Scratch.Get "content" | safeHTML -}}
  </div>

  {{ if ne .Type "standalone" }}
  <div class="share-buttons">
    <span>Share article on</span>
    <p style="color:red">TODO: Add Twitter and Facebook share buttons.</p>
  </div>

  {{ partial "pageline.html" . }}
  {{ end }}

  {{ if isset .Params "comments" }}
    {{ $.Scratch.Set "showComments" .Params.comments }}
  {{ else }}
    {{ $.Scratch.Set "showComments" (ne .Type "standalone") }}
  {{ end }}

  {{ if $.Scratch.Get "showComments" }}
  <div class="comments">
    <h1>Comments</h1>
    {{ template "_internal/disqus.html" . }}
  </div>
  {{ end }}

  {{ if .Draft }}<div class="draft-label"
    title="This page is a draft. It hasn't been published yet.">DRAFT</div>{{ end }}
</article>

{{ partial "footer.html" . }}
